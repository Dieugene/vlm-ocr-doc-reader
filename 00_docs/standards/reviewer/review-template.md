# Структура файла Review

Этот файл - **лаконичный отчет о проверке реализации**. Документирует найденные проблемы и решение по дальнейшим действиям.

## Принципы

- **Достаточность:** Достаточно для понимания проблем
- **Лаконичность:** Без избыточности, дублей
- **Конкретика:** Конкретные проблемы с указанием файлов и строк

## Формат файла

```markdown
# Review отчет: <Название задачи>

## Общая оценка

**Статус:** [Принято / Требует доработки / Требует архитектурного решения]

**Краткий вывод:** [1-2 предложения]

## Проверка соответствия ТЗ

**Технические критерии из analysis.md:**
- [x] TC-1: API возвращает профиль за < 100ms - ✅ Выполнено
- [ ] TC-2: Email валидация RFC 5322 - ❌ Проблема (см. ниже)

**Acceptance Criteria из task_brief:**
- [x] AC-1: ... - ✅ Выполнено
- [ ] AC-2: ... - ⚠️ Частично (см. ниже)

## Проблемы

[Только если есть проблемы]

### Проблема 1: [Короткое название]
**Файл:** `02_src/validators/email.py:45`
**Описание:** [Конкретное описание проблемы]
**Серьезность:** [Критическая / Высокая / Средняя / Низкая]

### Проблема 2: [Если есть]
...

[Если проблем нет: "Проблем не обнаружено"]

## Положительные моменты

[Опционально - только значимые]

- [Что сделано особенно хорошо]

## Решение

**Действие:** [Принять / Вернуть Analyst / Эскалировать к Architect]

**Обоснование:** [Почему такое решение]
```

## Категории проблем

### Проблемы реализации → Analyst
- Нарушение технических критериев
- Отклонение от плана без обоснования
- Недостающая функциональность
- Bugs в логике

### Архитектурные проблемы → Architect
- Нарушение ADR
- Изменение публичных интерфейсов
- Проблемы масштабируемости/производительности требующие архитектурного решения

### Принять → Architect для финальной приемки
- Все критерии выполнены
- Отклонения обоснованы
- Качество кода приемлемо

## Примеры

### Хороший отчет (лаконичный)

```markdown
# Review отчет: Email валидация

## Общая оценка

**Статус:** Требует доработки

**Краткий вывод:** Основная логика реализована корректно, но найдена критическая проблема с обработкой невалидных email.

## Проверка соответствия ТЗ

**Технические критерии:**
- [x] TC-1: DNS lookup с timeout - ✅ Реализовано
- [ ] TC-2: RFC 5322 валидация - ❌ Некорректная regex (см. ниже)
- [x] TC-3: Redis кэширование - ✅ Реализовано

**Acceptance Criteria:**
- [x] AC-1: API endpoint работает - ✅ Протестировано
- [ ] AC-2: Корректная обработка ошибок - ❌ См. проблему 1

## Проблемы

### Проблема 1: Некорректная обработка невалидных email

**Файл:** `02_src/validators/email.py:45`
**Описание:** При невалидном email возвращается 500 вместо 400. Не соответствует ADR-003 (error handling standard).
**Серьезность:** Высокая

### Проблема 2: Regex не полностью RFC 5322

**Файл:** `02_src/validators/email.py:12`
**Описание:** Regex не учитывает quoted strings в local part
**Серьезность:** Средняя

## Решение

**Действие:** Вернуть Analyst

**Обоснование:** Проблемы в реализации требуют уточнения технического плана по обработке ошибок.
```

### Плохой отчет (избыточный)

```markdown
# Review отчет: Email валидация

## Введение

Я провел детальный review кода представленного Developer...
[Много воды]

## Методология проверки

Я использовал следующий подход...
[Избыточные детали процесса]

## Детальный анализ кода

### Файл email.py
Строка 1: импорты выглядят корректно
Строка 2: ...
[Построчный разбор всего кода]

## Список всех найденных проблем

1. Мелкая опечатка в комментарии
2. Можно было использовать list comprehension
3. Имя переменной result могло быть более описательным
[Много несущественных замечаний]
```

## Решение о следующем шаге

### Критерии для "Принять"
- Все технические критерии выполнены
- Все acceptance criteria выполнены
- Отклонения от плана обоснованы в implementation.md
- Нет критичных проблем
- Код соответствует standards

### Критерии для "Вернуть Analyst"
- Не выполнены технические критерии
- Логические ошибки в реализации
- Отклонения от плана без обоснования
- Некорректная интерпретация ТЗ

### Критерии для "Эскалировать к Architect"
- Нарушение ADR
- Изменение архитектуры без согласования
- Проблемы требующие архитектурного решения
