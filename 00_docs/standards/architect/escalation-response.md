# Реагирование на эскалацию к Architect

Как принимать и обрабатывать вопросы эскалированные к тебе от других ролей.

## Когда к тебе эскалируют

Пользователь передаст промпт, который содержит:
- Твою роль
- Ссылку на `01_tasks/NNN/_questions_architect.md`
- Релевантные файлы для контекста
- Описание что нужно сделать

## Типичные источники эскалации

### От Analyst
- Требуется архитектурное решение
- Выбор между технологиями (если подходящей нет в проекте)
- Противоречие существующей архитектуре
- Изменение публичных API/интерфейсов

### От Developer
- Критические архитектурные проблемы в процессе разработки
- Невозможность следовать ADR из-за новых обстоятельств

## Процесс реагирования

### 1. Изучи вопросы

Прочитай `01_tasks/NNN/_questions_architect.md` и пойми:
- Кто эскалировал
- В чем проблема
- Какие есть варианты
- Что блокирует работу

### 2. Изучи контекст

Прочитай релевантные файлы из промпта:
- `00_docs/architecture/overview.md`
- Существующие ADR
- `task_brief` задачи
- `analysis` если эскалирует Analyst

### 3. Прими архитектурное решение

1. Обсуди с пользователем варианты (если нужно)

2. Определи номер ADR (посмотри `00_docs/architecture/`)

3. Создай `00_docs/architecture/decision_NNN_название.md`:

```markdown
# Decision NNN: <Название>

## Контекст
[Контекст из вопроса эскалации]

## Решение
[Принятое решение - директивно]

## Обоснование
[Почему это решение]

## Последствия
[Что нужно учесть]
```

4. Обнови `overview.md` если решение влияет на общую архитектуру

### 4. Сообщи результат

```markdown
Архитектурное решение принято:
- [Краткое описание решения]
- См. `00_docs/architecture/decision_NNN_название.md`
- [Кто эскалировал] может продолжать работу с учетом решения
```

### 5. Сформируй промпт для продолжения

**Если эскалировал Analyst:**

```
Ты — агент Analyst (см. .agents/analyst.md).

Прочитай:
- .agents/analyst.md
- 01_tasks/NNN/_questions_architect.md
- 00_docs/architecture/decision_NNN_название.md
- 01_tasks/NNN/task_brief_01.md

Контекст: Architect ответил на твои вопросы. Продолжай создание технического задания с учетом архитектурного решения.

Задача: Создай или обнови analysis_NN.md

После завершения сформируй промпт для Developer.
```

**Если эскалировал Developer:**

```
Ты — агент Developer (см. .agents/developer.md).

Прочитай:
- .agents/developer.md
- 01_tasks/NNN/_questions_architect.md
- 00_docs/architecture/decision_NNN_название.md
- 01_tasks/NNN/analysis_01.md

Контекст: Architect ответил на твои вопросы. Продолжай реализацию с учетом архитектурного решения.

Задача: Продолжи реализацию согласно обновленным архитектурным требованиям.

После завершения сообщи Analyst.
```

## Важно

- **Будь конкретен:** Четко сформулируй решение в ADR
- **Задокументируй:** Создай или обнови ADR
- **Разблокируй:** Дай достаточно информации для продолжения
- **Сформируй промпт:** Помоги пользователю вернуть эскалировавшего агента к работе
