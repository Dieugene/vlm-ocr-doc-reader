# Структура файла Analysis

Этот файл - **техническое задание для Developer**. Он должен быть детальным для понимания КАК реализовать, но лаконичным и без псевдокода.

## Принципы

- **Достаточность:** Достаточно для middle+ разработчика чтобы понять КАК реализовать
- **Лаконичность:** Без избыточности, дублей, разжевывания
- **Уровень middle+:** Детально, но без псевдокода

## Формат файла

```markdown
# Технический план: <Название задачи>

## 1. Анализ задачи
<Краткое резюме что нужно сделать>

## 2. Текущее состояние
<Что уже есть в кодовой базе релевантного>
<Какие модули/функции можно переиспользовать>

## 3. Предлагаемое решение

### 3.1. Общий подход
<Высокоуровневое описание решения>

### 3.2. Компоненты
#### Компонент A
- **Назначение:** ...
- **Интерфейс:** ...
- **Зависимости:** ...

### 3.3. Структуры данных
<Модели, схемы, форматы данных>

Пример:
```
UserProfile:
  - id: string
  - email: string
```

### 3.4. Ключевые алгоритмы
<Описание логики без псевдокода>

Пример:
"Валидация email: проверить формат через regex, затем DNS lookup, затем verification email"

НЕ: "function validateEmail(email) { ... }"

### 3.5. Изменения в существующем коде
<Что нужно модифицировать>

## 4. План реализации
1. Шаг 1: Создать модель UserProfile в models/user.py
2. Шаг 2: Добавить endpoint /api/profile в handlers/profile.py
...

## 5. Технические критерии приемки
- [ ] TC-1: API возвращает профиль за < 100ms
- [ ] TC-2: Email валидируется согласно RFC 5322

## 6. Важные детали для Developer
<Конкретные риски, подводные камни, особенности ЭТОЙ задачи>

✅ **Примеры хороших деталей:**
- "API провайдера X throttling 100 req/sec - добавь rate limiting"
- "Функция parse_date() возвращает None при ошибке, не exception"

❌ **Избегай общих советов:**
- "Пиши чистый код"
- "Следуй PEP8"
```

## Уровень детализации

### ✅ Правильный уровень:

**Компонент:**
```markdown
#### EmailValidator
- **Назначение:** Валидация email адресов
- **Интерфейс:** validate(email: str) -> ValidationResult
- **Логика:** 
  1. Проверка формата через regex
  2. DNS lookup для домена
  3. Отправка verification email
- **Зависимости:** dns_resolver, smtp_client
```

**Developer знает КАК:**
- Реализовать regex проверку
- Сделать DNS lookup
- Отправить email

**Developer НЕ получает псевдокод**

### ❌ Избыточная детализация:

```markdown
def validate_email(email):
    pattern = r'^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$'
    ...
```

Это уже код - не нужно.

### ❌ Недостаточная детализация:

```markdown
#### EmailValidator
- Валидирует email
```

Developer не знает КАК валидировать.

## Что писать в "Важные детали"

### ✅ Пиши:
- Специфичные для задачи технические риски
- Особенности внешних API/библиотек
- Нестандартное поведение существующего кода
- Производительные требования
- Ограничения и лимиты

### ❌ НЕ пиши:
- Очевидное ("используй read для чтения файлов")
- Общие best practices ("пиши тесты", "документируй код")
- То что уже в общих стандартах

## Итерации

При создании `analysis_02.md`:
- Сохрани работающие части из `analysis_01.md`
- Исправь проблемные части
- Добавь недостающие детали из `review_01.md`
